## Сравнительный анализ коммуникационных протоколов в микросервисах (REST, gRPC, GraphQL)

### 1. Резюме ключевых исследований (Бенчмаркинг)

Ряд недавних научных и технических исследований, посвященных микросервисной архитектуре, фокусируется на количественной оценке производительности протоколов связи. Наиболее важные бенчмарки сравнивают **время отклика (Latency)**, **пропускную способность (Throughput)** и **потребление ресурсов (CPU/Memory)**.

Общий вывод исследований: **gRPC** лидирует по показателям производительности, в то время как **GraphQL** и **REST** предлагают лучшую гибкость или простоту реализации, соответственно.

### 2. Сводные результаты и метрики

| Критерий                   | gRPC (HTTP/2 + Protobuf)                         | REST (HTTP/1.1 + JSON)   | GraphQL (HTTP/1.1 + JSON/кастомный)                            |
| -------------------------- | ------------------------------------------------ | ------------------------ | -------------------------------------------------------------- |
| **Среднее Время Отклика**  | **Самое низкое** (быстрее всех)                  | Среднее                  | **Самое высокое** (медленнее всех)                             |
| **Пропускная Способность** | **Самая высокая**                                | Средняя/Стабильная       | Низкая (часто нестабильная)                                    |
| **Размер Payload**         | **Самый маленький** (за счет бинарного Protobuf) | Большой (текстовый JSON) | Переменный (зависит от запроса клиента)                        |
| **Потребление CPU**        | Низкое / Среднее                                 | Низкое                   | **Самое высокое** (за счет парсинга, резолверов и N+1 проблем) |
| **Протокол Транспорта**    | HTTP/2 (изначально)                              | HTTP/1.1 или HTTP/2      | HTTP/1.1 или HTTP/2                                            |

#### Ключевые количественные наблюдения:

- **gRPC vs REST (Простое Извлечение Плоских Данных):** При высокой нагрузке gRPC может демонстрировать **скорость отклика в 2-4 раза быстрее**, чем REST, благодаря использованию бинарного формата Protobuf, более быстрого механизма сериализации/десериализации и преимуществ HTTP/2.

- **GraphQL: Цена Гибкости:** В большинстве тестов GraphQL показал наивысшую задержку, особенно при увеличении числа запросов, что связывают с дополнительными издержками на выполнение запросов (резолверы) и более высокое потребление процессорного времени (может быть на 10-50% выше, чем у REST/gRPC при одинаковой нагрузке).

- **Исключение (Сложные Запросы):** В сценариях, где REST требует множества последовательных запросов (`N` запросов для получения связанных данных), **GraphQL** может превзойти REST, так как он позволяет клиенту получить все необходимые данные за **один** сетевой вызов (минимизируя проблему "Over-fetching" и "Under-fetching").

### 3. Резюме по областям применения

| Протокол                    | Ключевые Выводы (Когда Использовать)                                                                                                                                                                                                                                                           |
| --------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **gRPC (RPC)**              | Идеален для **внутреннего** взаимодействия между микросервисами, где критически важны низкая задержка, высокая пропускная способность и минимальный расход сетевого трафика. Отлично подходит для полиглотной среды (разные языки) и сценариев потоковой передачи данных.                      |
| **REST (Resource-based)**   | Лучший выбор для **публичных** API и взаимодействия с внешними клиентами (браузеры, мобильные устройства), где важны простота, широкая совместимость (браузеры), читаемость и использование встроенных механизмов HTTP (например, кэширование).                                                |
| **GraphQL (Client-driven)** | Оптимален для создания API Gateway (шлюзов) или бэкендов для фронтенда (BFF), где клиенту требуется **высокая гибкость** и возможность точно определить, какие поля ему нужны, чтобы избежать избыточной загрузки данных. Используется для агрегации данных из нескольких внутренних сервисов. |

### 4. Ссылки на исследования

Ниже приведены ссылки на ключевые научные публикации, результаты которых легли в основу данного анализа:

1. **"Performance evaluation of microservices communication with REST, GraphQL, and gRPC"** (2024)

   - **Авторы:** Muhammad Niswar et al.
   - **Описание:** Сравнение времени отклика и загрузки CPU для плоских и вложенных данных.
   - **Ссылка 1 (Страница журнала с PDF):** [https://ijet.ise.pw.edu.pl/index.php/ijet/article/view/10.24425-ijet.2024.149562](https://ijet.ise.pw.edu.pl/index.php/ijet/article/view/10.24425-ijet.2024.149562 'null')
   - **Ссылка 2 (ResearchGate):** [https://www.researchgate.net/publication/381763921_Performance_evaluation_of_microservices_communication_with_REST_GraphQL_and_gRPC](https://www.researchgate.net/publication/381763921_Performance_evaluation_of_microservices_communication_with_REST_GraphQL_and_gRPC 'null')

2. **"Impact of Protocol Selection on Performance and Scalability in Microservices: A Comparison of gRPC, REST, and GraphQL"** (2025)

   - **Описание:** Комплексный анализ задержки, пропускной способности, потребления ресурсов и масштабируемости под разной нагрузкой.
   - **Ссылка (ResearchGate):** [https://www.researchgate.net/publication/392507557_Impact_of_Protocol_Selection_on_Performance_and_Scalability_in_Microservices_A_Comparison_of_gRPC_REST_and_GraphQL](https://www.researchgate.net/publication/392507557_Impact_of_Protocol_Selection_on_Performance_and_Scalability_in_Microservices_A_Comparison_of_gRPC_REST_and_GraphQL 'null')

### Вывод

Исследования подтверждают, что в контексте **внутренней** связи микросервисов (по сценарию "сервер-сервер"), gRPC является безусловным лидером по производительности и эффективности. REST сохраняет позицию стандарта для внешних публичных API. GraphQL является мощным инструментом для решения проблемы избыточной выборки данных на стороне клиента, но за это приходится платить более высоким потреблением ресурсов на стороне сервера.
